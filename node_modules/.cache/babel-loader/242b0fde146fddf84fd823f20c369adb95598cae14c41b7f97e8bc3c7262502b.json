{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useLanguage } from './useLanguage';\nexport const useTranslation = () => {\n  _s();\n  const {\n    currentLanguage\n  } = useLanguage();\n  const [translations, setTranslations] = useState({});\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const loadTranslations = async () => {\n      try {\n        setLoading(true);\n        const response = await import(`../i18n/resources/${currentLanguage}.json`);\n        setTranslations(response.default);\n      } catch (error) {\n        console.error(`Failed to load translations for ${currentLanguage}:`, error);\n        // 回退到英文\n        const fallback = await import('../i18n/resources/en.json');\n        setTranslations(fallback.default);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadTranslations();\n  }, [currentLanguage]);\n  const t = (key, params = {}) => {\n    const keys = key.split('.');\n    let value = translations;\n    for (const k of keys) {\n      var _value;\n      value = (_value = value) === null || _value === void 0 ? void 0 : _value[k];\n      if (value === undefined) break;\n    }\n    if (typeof value === 'string') {\n      // 支持参数替换\n      return value.replace(/\\{\\{(\\w+)\\}\\}/g, (match, param) => {\n        return params[param] || match;\n      });\n    }\n    return key; // 返回key作为fallback\n  };\n  return {\n    t,\n    loading,\n    currentLanguage\n  };\n};\n_s(useTranslation, \"GX1fFtlicFb7VhG89lANuhe4pfg=\", false, function () {\n  return [useLanguage];\n});","map":{"version":3,"names":["useState","useEffect","useLanguage","useTranslation","_s","currentLanguage","translations","setTranslations","loading","setLoading","loadTranslations","response","default","error","console","fallback","t","key","params","keys","split","value","k","_value","undefined","replace","match","param"],"sources":["D:/zodiac signs daily horoscope today/src/hooks/useTranslation.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useLanguage } from './useLanguage';\r\n\r\nexport const useTranslation = () => {\r\n  const { currentLanguage } = useLanguage();\r\n  const [translations, setTranslations] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const loadTranslations = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await import(`../i18n/resources/${currentLanguage}.json`);\r\n        setTranslations(response.default);\r\n      } catch (error) {\r\n        console.error(`Failed to load translations for ${currentLanguage}:`, error);\r\n        // 回退到英文\r\n        const fallback = await import('../i18n/resources/en.json');\r\n        setTranslations(fallback.default);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadTranslations();\r\n  }, [currentLanguage]);\r\n\r\n  const t = (key, params = {}) => {\r\n    const keys = key.split('.');\r\n    let value = translations;\r\n    \r\n    for (const k of keys) {\r\n      value = value?.[k];\r\n      if (value === undefined) break;\r\n    }\r\n    \r\n    if (typeof value === 'string') {\r\n      // 支持参数替换\r\n      return value.replace(/\\{\\{(\\w+)\\}\\}/g, (match, param) => {\r\n        return params[param] || match;\r\n      });\r\n    }\r\n    \r\n    return key; // 返回key作为fallback\r\n  };\r\n\r\n  return { t, loading, currentLanguage };\r\n};"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,eAAe;AAE3C,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClC,MAAM;IAAEC;EAAgB,CAAC,GAAGH,WAAW,CAAC,CAAC;EACzC,MAAM,CAACI,YAAY,EAAEC,eAAe,CAAC,GAAGP,QAAQ,CAAC,CAAC,CAAC,CAAC;EACpD,MAAM,CAACQ,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAE5CC,SAAS,CAAC,MAAM;IACd,MAAMS,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACnC,IAAI;QACFD,UAAU,CAAC,IAAI,CAAC;QAChB,MAAME,QAAQ,GAAG,MAAM,MAAM,CAAC,qBAAqBN,eAAe,OAAO,CAAC;QAC1EE,eAAe,CAACI,QAAQ,CAACC,OAAO,CAAC;MACnC,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,mCAAmCR,eAAe,GAAG,EAAEQ,KAAK,CAAC;QAC3E;QACA,MAAME,QAAQ,GAAG,MAAM,MAAM,CAAC,2BAA2B,CAAC;QAC1DR,eAAe,CAACQ,QAAQ,CAACH,OAAO,CAAC;MACnC,CAAC,SAAS;QACRH,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDC,gBAAgB,CAAC,CAAC;EACpB,CAAC,EAAE,CAACL,eAAe,CAAC,CAAC;EAErB,MAAMW,CAAC,GAAGA,CAACC,GAAG,EAAEC,MAAM,GAAG,CAAC,CAAC,KAAK;IAC9B,MAAMC,IAAI,GAAGF,GAAG,CAACG,KAAK,CAAC,GAAG,CAAC;IAC3B,IAAIC,KAAK,GAAGf,YAAY;IAExB,KAAK,MAAMgB,CAAC,IAAIH,IAAI,EAAE;MAAA,IAAAI,MAAA;MACpBF,KAAK,IAAAE,MAAA,GAAGF,KAAK,cAAAE,MAAA,uBAALA,MAAA,CAAQD,CAAC,CAAC;MAClB,IAAID,KAAK,KAAKG,SAAS,EAAE;IAC3B;IAEA,IAAI,OAAOH,KAAK,KAAK,QAAQ,EAAE;MAC7B;MACA,OAAOA,KAAK,CAACI,OAAO,CAAC,gBAAgB,EAAE,CAACC,KAAK,EAAEC,KAAK,KAAK;QACvD,OAAOT,MAAM,CAACS,KAAK,CAAC,IAAID,KAAK;MAC/B,CAAC,CAAC;IACJ;IAEA,OAAOT,GAAG,CAAC,CAAC;EACd,CAAC;EAED,OAAO;IAAED,CAAC;IAAER,OAAO;IAAEH;EAAgB,CAAC;AACxC,CAAC;AAACD,EAAA,CA5CWD,cAAc;EAAA,QACGD,WAAW;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}